<!-- FILE: templates/partials/cookbook_list.html (Corrected Version) -->

<div class="space-y-6">
  <h1 class="text-3xl font-bold text-gray-800 border-b pb-3">My Cookbook</h1>
  
  {% if recipes %}
  <ul id="recipe-list" class="space-y-4">
    
    {% for recipe in recipes %}
    <li class="bg-white p-4 sm:p-6 border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-shadow duration-200">
      
      <div class="flex justify-between items-start">
        <div class="flex-grow">
          <h2 class="text-xl font-bold text-gray-800 cursor-pointer hover:text-indigo-600 transition-colors"
              hx-get="/recipes/{{ recipe.id }}"
              hx-target="#output-container"
              hx-swap="innerHTML">
              {{ recipe.recipe_name }}
          </h2>
          {% if recipe.provenance %}
            <p class="text-sm text-gray-500 italic mt-1 pr-4">"{{ recipe.provenance }}"</p>
          {% endif %}
        </div>
        
        <!-- 
          *** THE FIX IS HERE ***
          - The problematic `type="button"` attribute has been removed.
          - The browser and HTMX can now use their default, reliable behaviors.
        -->
        <button
          class="flex-shrink-0 flex items-center justify-center w-8 h-8 rounded-full text-gray-400 hover:bg-red-100 hover:text-red-600 transition-colors"
          hx-delete="/recipes/{{ recipe.id }}"
          hx-target="closest li"
          hx-swap="outerHTML"
          hx-confirm="Are you sure you want to delete '{{ recipe.recipe_name }}'?"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
          </svg>
        </button>
      </div>

      <div class="mt-4 border-t pt-3">
        <h4 class="text-sm font-semibold text-gray-600 uppercase tracking-wider">Ingredients</h4>
        <ul class="mt-2 pl-5 list-disc space-y-1 text-gray-700">
          {% for item in recipe.items %}
          <li>
            {% if item.quantity %}<span class="font-medium">{{ item.quantity }}</span>{% endif %}
            {% if item.unit %}<span class="text-gray-500 ml-1">{{ item.unit }}</span>{% endif %}
            <span class="mx-2 text-gray-400">&ndash;</span>
            <span>{{ item.itemName }}</span>
          </li>
          {% else %}
          <li class="list-none text-gray-400 italic">No ingredients listed.</li>
          {% endfor %}
        </ul>
      </div>

    </li>
    {% endfor %}

  </ul>
  {% else %}
  <div class="text-center py-10 px-4 bg-gray-50 rounded-lg border-2 border-dashed">
    <h3 class="text-lg font-medium text-gray-700">Your Cookbook is Empty</h3>
    <p class="text-gray-500 mt-1">Start by dictating a new recipe!</p>
  </div>
  {% endif %}

</div>